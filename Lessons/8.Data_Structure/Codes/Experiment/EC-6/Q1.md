### 实验六: 哈夫曼码的编/译码系统

### 实验目的：
- 理解和掌握哈夫曼编码的原理。
- 学习和实践构建哈夫曼树的算法。
- 掌握对给定报文进行哈夫曼编码和解码的方法。
- 提高编程能力和解决实际问题的能力。

### 实验内容：
- 构建哈夫曼树，并根据给定的字符集和权值生成哈夫曼编码。
- 对输入的目标报文进行哈夫曼编码。
- 对编码后的二进制码进行解码，恢复原始报文。

## 一、需求分析
本程序设计的任务是实现一个哈夫曼码的编/译码系统。程序需要接收字符集大小、字符及其对应的权值，以及目标报文，然后输出编码后的二进制码和解码后的报文。具体要求如下：

1. 输入的形式和输入值的范围：
   - 第一行为字符集大小n的正整数（n ≤ 100）；
   - 接下来为n个字符和对应的n个权值（正整数）；
   - 目标报文长度小于或等于100。

2. 输出的形式：
   - 编码后的二进制码，占一行；
   - 解码后的报文，占一行；
   - 最后输出一个回车符。

3. 程序所能达到的功能：
   - 构建哈夫曼树并生成每个字符的哈夫曼编码。
   - 对给定的报文进行哈夫曼编码。
   - 对编码后的二进制码进行解码，恢复原始报文。

4. 测试数据：
   - 测试用例一：
     - 输入：
       ```
       5 a b c d e 12 40 15 8 25
       bbbaddeccbbb
       ```
     - 预期输出：
       ```
       00011111110111010110110000
       bbbaddeccbbb
       ```

## 二、概要设计
本程序的主要算法是构建哈夫曼树和进行哈夫曼编码/解码。程序由以下模块组成：

1. 节点结构体定义模块：定义哈夫曼树的节点结构。
2. 最小堆结构体定义模块：定义用于构建哈夫曼树的最小堆结构。
3. 哈夫曼树构建模块：根据输入的字符和权值构建哈夫曼树。
4. 哈夫曼编码生成模块：根据哈夫曼树生成每个字符的编码。
5. 编码模块：对目标报文进行哈夫曼编码。
6. 解码模块：对编码后的二进制码进行解码。

程序的工作流程如下：
- 首先，程序接收字符集大小、字符及其权值，以及目标报文。
- 然后，构建哈夫曼树，并生成每个字符的哈夫曼编码。
- 接着，对目标报文进行哈夫曼编码，生成编码后的二进制码。
- 最后，对编码后的二进制码进行解码，恢复原始报文，并输出结果。

## 三、详细设计
1. 数据结构设计：
   - 定义节点结构体`Node`，包含字符、权值以及左右子树指针。
   - 定义最小堆结构体`MinHeap`，包含堆大小和节点数组。

2. 每个模块的分析：
   - 节点结构体定义模块：
     ```c
     typedef struct Node {
         char character;
         int weight;
         struct Node *left, *right;
     } Node;
     ```
   - 最小堆结构体定义模块：
     ```c
     typedef struct MinHeap {
         int size;
         Node* array[MAX_SIZE];
     } MinHeap;
     ```
   - 哈夫曼树构建模块：
     ```c
     Node* buildHuffmanTree(char characters[], int weights[], int size) {
         // ...（代码省略）
     }
     ```
   - 哈夫曼编码生成模块：
     ```c
     void generateCodes(Node* root, char* code, int top, char codes[MAX_SIZE][MAX_SIZE]) {
         // ...（代码省略）
     }
     ```
   - 编码模块：
     ```c
     void encode(char* str, char codes[MAX_SIZE][MAX_SIZE], char* encodedStr) {
         // ...（代码省略）
     }
     ```
   - 解码模块：
     ```c
     void decode(Node* root, char* encodedStr, char* decodedStr) {
         // ...（代码省略）
     }
     ```

3. 完整的程序：
   ```c
   // 见源文件
   ```

## 四、使用说明、测试分析及结果
1. 程序使用说明：
   - 程序的运行环境为支持C语言的编译器。
   - 用户根据提示输入字符集大小、字符及其权值，以及目标报文，程序将自动进行编码和解码，并输出结果。

2. 测试结果与分析：
   - 测试用例一：
     - 输入：
       ```
       5 a b c d e 12 40 15 8 25
       bbbaddeccbbb
       ```
     - 输出：
       ```
       00011111110111010110110000
       bbbaddeccbbb
       ```
   - 测试结果符合预期，程序能够正确地进行哈夫曼编码和解码。

3. 调试过程中遇到的问题及解决办法：
   - 问题：在构建最小堆时，节点的权重比较可能出现错误。
     解决办法：确保`minHeapify`函数正确地进行节点权重的比较和调整。

   - 问题：在解码过程中，可能会因为二进制串的结束而导致错误。
     解决办法：在`decode`函数中添加适当的检查，确保不会访问空的节点。

4. 运行界面：
   - 程序启动后，提示用户输入字符集大小、字符及其权值，以及目标报文。
   - 输入完成后，程序输出编码后的二进制码和解码后的报文。

## 五、实验总结
- 在编程过程中，我花费了约2小时完成程序设计和编码。
- 纸上设计耗时约0.5小时，上机输入和调试耗时约1.5小时。
- 遇到的难题主要是如何正确地构建最小堆和哈夫曼树，通过查阅资料和反复测试，最终解决了问题。
- 我的收获包括加深了对哈夫曼编码原理的理解，提高了数据结构和算法的应用能力，以及编程和调试技巧。

---

请注意，这是一个实验报告的草稿，您需要根据实际的程序代码和测试结果来填充详细设计、完整的程序以及测试分析等部分。希望这份草稿对您的实验报告有所帮助。